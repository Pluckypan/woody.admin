webpackJsonp([34],{556:function(e,t,n){function o(e){a||n(909)}var a=!1,s=n(56)(n(849),n(961),o,null,null);s.options.__file="/Users/plucky/own/Woody/woody.admin/src/components/bookmarks/tree.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] tree.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},849:function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0});var a=n(222),s=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={data:function(){var e=this;return{param:{keyName:"id",titleName:"name",dataMode:"list",getDatas:function(t,n){e.getData(t,function(e){n(e)})}},selectItem:null}},mounted:function(){},methods:{editBookmark:function(e){this.$router.push({name:"bookmark",query:{id:e}})},deleteBookmark:function(t){var n=this;e.Bookmark.remove(t,function(e,t){t&&t>0&&(n.$Message("删除成功"),window.location.reload())})},editCat:function(e){this.$router.push({name:"category",query:{id:e}})},deleteCat:function(t){var n=this;e.Category.remove(t,function(e,t){t&&t>0&&(n.$Message("删除成功"),window.location.reload())})},edit:function(e){this.$set(e,"editValue",e.name),this.$set(e,"editing",!0)},updateValue:function(e){this.$set(e,"editing",!1),this.$refs.demo.updateTreeItem(e.id,{name:e.editValue})},append:function(e){this.$refs.demo.appendTreeItem(e.id,{id:s.default.uuid(),name:"测试"})},remove:function(e){this.$refs.demo.removeTreeItem(e.id)},choose:function(e){},select:function(e){this.selectItem=e},open:function(e){e.isOpen=!e.isOpen,e.isCat&&("h-icon-angle-right"!=e.expIcon&&"h-icon-angle-down"!=e.expIcon||(o(e.isOpen),e.isOpen?e.expIcon="h-icon-angle-right":e.expIcon="h-icon-angle-down"))},expand:function(e){this.$refs.demo.expand(e)},expandAll:function(){this.$refs.demo.expandAll()},foldAll:function(){this.$refs.demo.foldAll()},getData:function(e,t){var n=this;console.log(e?"id="+e.id+" isCat="+e.isCat:null),e&&1!=e.isCat?t([]):n.getCategory(e,function(o){o&&o.length>0?(t(o),e&&(e.expIcon="h-icon-angle-down")):e?(e.expIcon="h-tree-item-bookmark",n.getBookmark(e.id,t)):t([])})},getBookmark:function(t,n){var o={cid:t};e.Bookmark.getAll(o,function(e,t){var o=[];t&&t.length>0&&(o=t.map(function(e){return e.treeIcon="icon-ribbon",e.expIcon="h-tree-item-bookmark",e.isCat=!1,e})),n(o)})},getCategory:function(t,n){var o={pid:t?t.id:"root"},a=this;e.Category.search(o,0,function(e,o){var s=[];o&&o.length>0&&(s=o.map(function(e){return e.treeIcon="icon-folder",e.expIcon="h-icon-angle-right",e.isCat=!0,e}));var r=t?t.id:"root";a.getBookmark(r,function(e){n(s.concat(e))})})}}}}).call(t,n(216).default,n(148))},909:function(e,t){},961:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-basic-vue frame-page h-panel"},[e._m(0),e._v(" "),n("div",{staticClass:"h-panel-body tree4-demo-vue"},[n("Row",[n("Cell",{attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[n("Tree",{ref:"demo",attrs:{option:e.param,filterable:!1,selectOnClick:"",className:"h-tree-theme-row-selected"},on:{open:e.open,select:e.select,choose:e.choose},scopedSlots:e._u([{key:"item",fn:function(t){var o=t.item;return[n("span",[n("i",{class:o.expIcon})]),e._v(" "),n("div",{staticClass:"tree-show-custom"},[n("span",{class:o.treeIcon}),e._v(" "),o.editing?n("input",{directives:[{name:"model",rawName:"v-model",value:o.editValue,expression:"item.editValue"}],attrs:{type:"text"},domProps:{value:o.editValue},on:{blur:function(t){return e.updateValue(o)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateValue(o)},input:function(t){t.target.composing||e.$set(o,"editValue",t.target.value)}}}):n("span",{staticClass:"tree-show-title"},[e._v(e._s(o.name))]),e._v(" "),o.editing?e._e():n("span",{staticClass:"tree-edit-part"})])]}}])})],1),e._v(" "),n("Cell",{attrs:{xs:24,sm:24,md:10,lg:10,xl:10}},[n("div",{staticClass:"right-fixed-container"},[null!=e.selectItem&&1==e.selectItem.isCat?n("Form",{attrs:{readonly:!0}},[n("FormItem",{attrs:{label:"编码"}},[e._v(e._s(e.selectItem.id))]),e._v(" "),n("FormItem",{attrs:{label:"名称"}},[e._v(e._s(e.selectItem.name))]),e._v(" "),n("FormItem",{attrs:{label:"日期"}},[e._v(e._s(e.selectItem.create_time))]),e._v(" "),e.selectItem.desc&&e.selectItem.desc.length>0?n("FormItem",{attrs:{label:"备注"}},[e._v(e._s(e.selectItem.desc))]):e._e(),e._v(" "),n("FormItem",[n("Button",{attrs:{color:"primary"},on:{click:function(t){return e.editCat(e.selectItem.id)}}},[e._v("编辑")]),e._v(" "),n("Button",{on:{click:function(t){return e.deleteCat(e.selectItem)}}},[e._v("删除")])],1)],1):e._e(),e._v(" "),null!=e.selectItem&&0==e.selectItem.isCat?n("Form",{attrs:{readonly:!0}},[n("FormItem",{attrs:{label:"编码"}},[e._v(e._s(e.selectItem.id))]),e._v(" "),n("FormItem",{attrs:{label:"名称"}},[e._v(e._s(e.selectItem.name))]),e._v(" "),n("FormItem",{attrs:{label:"日期"}},[e._v(e._s(e.selectItem.create_time))]),e._v(" "),n("FormItem",{attrs:{label:"链接"}},[n("a",{attrs:{href:e.selectItem.url,target:"_blank"}},[e._v(e._s(e.selectItem.url))])]),e._v(" "),e.selectItem.desc&&e.selectItem.desc.length>0?n("FormItem",{attrs:{label:"备注"}},[e._v(e._s(e.selectItem.desc))]):e._e(),e._v(" "),e.selectItem.tag&&e.selectItem.tag.length>0?n("div",{staticClass:"divider",staticStyle:{"margin-left":"40px"}}):e._e(),e._v(" "),e.selectItem.tag&&e.selectItem.tag.length>0?n("FormItem",{attrs:{label:"标签"}},[n("TagInput",{staticStyle:{width:"100%"},attrs:{readonly:!0},model:{value:e.selectItem.tag,callback:function(t){e.$set(e.selectItem,"tag",t)},expression:"selectItem.tag"}})],1):e._e(),e._v(" "),n("FormItem",[n("Button",{attrs:{color:"primary"},on:{click:function(t){return e.editBookmark(e.selectItem.id)}}},[e._v("编辑")]),e._v(" "),n("Button",{on:{click:function(t){return e.deleteBookmark(e.selectItem)}}},[e._v("删除")])],1)],1):e._e()],1)])],1)],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"h-panel-bar"},[n("span",{staticClass:"h-panel-title"},[e._v("我的书签")])])}]},e.exports.render._withStripped=!0}});