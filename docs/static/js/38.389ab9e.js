webpackJsonp([38],{552:function(t,e,o){function r(t){a||o(891)}var a=!1,s=o(56)(o(845),o(943),r,"data-v-034efc54",null);s.options.__file="/Users/plucky/own/Woody/woody.admin/src/components/bookmarks/bookmark.vue",s.esModule&&Object.keys(s.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] bookmark.vue: functional components are not supported with templates, they should use render functions."),t.exports=s.exports},845:function(t,e,o){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var a=o(64),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={data:function(){return{mode:"single",bookmark:{cid:"root",id:t.IDMaker.gen(),name:"",desc:"",tag:[],hot:!1,url:"",order:0,icon:"",cover:"",create_time:(0,s.default)().format("f")},cats:[{title:"根",key:"root"}],isEdit:!1,validationRules:{required:["cid","id","name","url","order","create_time"],url:["url"]}}},mounted:function(){var e=this.$route.query.id,o=this;e?(o.isEdit=!0,t.Bookmark.find(e,function(t,e){e&&(o.bookmark={cid:e.cid,id:e.id,name:e.name,desc:e.icon,tag:e.tag,hot:e.hot,url:e.url,icon:e.icon,cover:e.cover,order:e.order,create_time:e.create_time})})):o.isEdit=!1,t.Category.findCats(function(t,e){o.cats=e})},methods:{importJson:function(){var t=this.bookmark.desc;if(!t||0==t.length)return void this.$Message("请在备注中输入json");var e=null;try{e=JSON.parse(t)}catch(t){e=null}if(!e||!e.url)return void this.$Message("请输入合法的书签信息");this.bookmark={cid:e.cid,id:e.id,name:e.name,desc:e.desc,tag:e.tag,icon:e.icon,cover:e.cover,url:e.url,create_time:(0,s.default)().format("f")}},open:function(){window.open(this.bookmark.url)},save:function(){if(this.$refs.form.valid().result){var e=this;1==e.isEdit?t.Bookmark.update(this.bookmark,function(t,o){o&&o>0&&e.$Message("更新成功")}):t.Bookmark.push(r.copy(this.bookmark),function(t,o){e.$Message("保存成功"),e.reset()})}},reset:function(){this.bookmark.id=t.IDMaker.gen(),this.bookmark.create_time=(0,s.default)().format("f"),this.bookmark.desc="",this.bookmark.cid="root",this.bookmark.name="",this.bookmark.url="",this.bookmark.tag=[],this.bookmark.icon="",this.bookmark.cover="",this.bookmark.order=0,this.isEdit=!1,this.$refs.form.reset()},del:function(){var e=this;t.Bookmark.remove(this.bookmark,function(t,o){e.reset()})}}}}).call(e,o(216).default,o(62).default)},891:function(t,e){},943:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-form frame-page basic-form-vue"},[o("div",{staticClass:"h-panel"},[o("div",{staticClass:"h-panel-bar"},[o("span",{staticClass:"h-panel-title"},[t._v(t._s(this.isEdit?"编辑书签":"添加书签"))])]),t._v(" "),o("div",{staticClass:"h-panel-body"},[o("Form",{ref:"form",attrs:{"label-width":110,mode:"twocolumn",model:t.bookmark,rules:t.validationRules,showErrorTip:""}},[o("FormItem",{attrs:{label:"分类",prop:"cid"}},[o("Select",{attrs:{datas:t.cats},model:{value:t.bookmark.cid,callback:function(e){t.$set(t.bookmark,"cid",e)},expression:"bookmark.cid"}})],1),t._v(" "),o("FormItem",{attrs:{label:"图标"}},[o("Avatar",{attrs:{src:t.bookmark.icon,width:20}})],1),t._v(" "),o("FormItem",{attrs:{label:"名称",prop:"name"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.bookmark.name,expression:"bookmark.name"},{name:"wordlimit",rawName:"v-wordlimit",value:100,expression:"100"}],attrs:{type:"text",placeholder:"限制输入50个字"},domProps:{value:t.bookmark.name},on:{input:function(e){e.target.composing||t.$set(t.bookmark,"name",e.target.value)}}})]),t._v(" "),o("FormItem",{attrs:{label:"编号",readonly:""}},[t._v(t._s(t.bookmark.id))]),t._v(" "),o("FormItem",{attrs:{label:"链接",prop:"url"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.bookmark.url,expression:"bookmark.url"}],attrs:{type:"text"},domProps:{value:t.bookmark.url},on:{input:function(e){e.target.composing||t.$set(t.bookmark,"url",e.target.value)}}})]),t._v(" "),o("FormItem",{attrs:{label:"常用",readonly:""}},[o("Checkbox",{model:{value:t.bookmark.hot,callback:function(e){t.$set(t.bookmark,"hot",e)},expression:"bookmark.hot"}})],1),t._v(" "),o("FormItem",{attrs:{label:"排序",prop:"order"}},[o("Slider",{attrs:{range:{start:0,end:255}},model:{value:t.bookmark.order,callback:function(e){t.$set(t.bookmark,"order",e)},expression:"bookmark.order"}})],1),t._v(" "),o("FormItem",{attrs:{readonly:"",label:"排序"}},[t._v(t._s(t.bookmark.order))]),t._v(" "),o("FormItem",{attrs:{label:"日期",prop:"create_time"}},[o("DatePicker",{attrs:{placeholder:"选择日期",type:"datetime",format:"YYYY/MM/DD HH:mm:ss"},model:{value:t.bookmark.create_time,callback:function(e){t.$set(t.bookmark,"create_time",e)},expression:"bookmark.create_time"}})],1),t._v(" "),o("FormItem",{attrs:{label:"标签",prop:"tag"}},[o("TagInput",{model:{value:t.bookmark.tag,callback:function(e){t.$set(t.bookmark,"tag",e)},expression:"bookmark.tag"}})],1),t._v(" "),o("FormItem",{attrs:{label:"备注",prop:"desc",single:""}},[o("textarea",{directives:[{name:"autosize",rawName:"v-autosize"},{name:"wordcount",rawName:"v-wordcount",value:2e3,expression:"2000"},{name:"model",rawName:"v-model",value:t.bookmark.desc,expression:"bookmark.desc"}],attrs:{rows:"3",placeholder:"添加一段描述"},domProps:{value:t.bookmark.desc},on:{input:function(e){e.target.composing||t.$set(t.bookmark,"desc",e.target.value)}}})]),t._v(" "),o("FormItem",{attrs:{single:""}},[o("Button",{attrs:{color:"primary"},on:{click:t.save}},[t._v(t._s(this.isEdit?"更新":"保存"))]),t._v("\n\t\t\t\t\t   \n\t\t\t\t\t"),o("Button",{on:{click:t.reset}},[t._v("重置")]),t._v("\n\t\t\t\t\t   \n\t\t\t\t\t"),this.isEdit?o("Button",{on:{click:t.del}},[t._v("删除")]):t._e(),t._v("\n\t\t\t\t\t   \n\t\t\t\t\t"),this.isEdit?o("Button",{on:{click:t.open}},[t._v("打开")]):t._e(),t._v(" "),this.isEdit?t._e():o("Button",{on:{click:t.importJson}},[t._v("导入")])],1)],1)],1)])])},staticRenderFns:[]},t.exports.render._withStripped=!0}});